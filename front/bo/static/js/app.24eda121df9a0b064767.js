webpackJsonp([2],{"25Wg":function(e,t){},"32t3":function(e,t){},"95Du":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),i=n("Dd8w"),s=n.n(i),a=n("NYxO"),o={methods:{logout:function(){var e=this;this.$store.dispatch("auth/logout").then(function(t){e.$router.push({name:"signin"})}).catch(function(e){})}},computed:s()({},Object(a.b)({isConnected:"auth/isConnected"}))},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[e.isConnected?n("v-btn",{attrs:{color:"secondary"},nativeOn:{click:function(t){e.logout(t)}}},[e._v("Logout")]):e._e()],1)])},staticRenderFns:[]};var l={components:{TopBar:n("VU/8")(o,c,!1,function(e){n("32t3")},null,null).exports},name:"App"},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("v-app",{attrs:{light:""}},[t("v-container",{attrs:{"mt-5":"",id:"main"}},[t("top-bar"),this._v(" "),t("router-view")],1)],1)],1)},staticRenderFns:[]};var d=n("VU/8")(l,u,!1,function(e){n("YP8P")},null,null).exports,f=n("/ocq"),v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{xs12:"",sm12:"",md5:"",lg5:"",xl5:"","offset-md1":""}},[n("v-alert",{attrs:{color:"error",icon:"warning",value:"true",dismissible:""},model:{value:e.alert.warning,callback:function(t){e.$set(e.alert,"warning",t)},expression:"alert.warning"}},[e._v("\n        Erreur lors de l'inscription\n    ")]),e._v(" "),n("v-alert",{attrs:{color:"success",icon:"check_circle",value:"true",dismissible:""},model:{value:e.alert.success,callback:function(t){e.$set(e.alert,"success",t)},expression:"alert.success"}},[e._v("\n        Vous pouvez maintenant vous connecter\n    ")]),e._v(" "),n("h1",[e._v("Inscription")]),e._v(" "),n("form",{on:{submit:function(t){t.preventDefault(),e.signup()},keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.signup()}}},[n("v-text-field",{attrs:{type:"text",placeholder:"Login",required:""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),e._v(" "),n("v-text-field",{attrs:{type:"password",placeholder:"Password",required:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),e._v(" "),n("v-btn",{attrs:{type:"submit"}},[e._v("S'inscrire")])],1)],1)},staticRenderFns:[]};var m=n("VU/8")({name:"signup",data:function(){return{user:{username:"",password:""},alert:{warning:!1,success:!1}}},methods:{signup:function(){var e=this;this.$store.dispatch("auth/signup",this.user).then(function(t){e.alert.success=!0}).catch(function(t){(t.response.status=401)&&(e.alert.warning=!0)})}}},v,!1,function(e){n("ePtn")},"data-v-fce0f4e8",null).exports,p={name:"Signin",components:{signup:m},data:function(){return{user:{username:"",password:""},alertConnexion:!1}},methods:{signin:function(){var e=this;this.$store.dispatch("auth/login",this.user).then(function(t){e.$router.push({name:"series_list"})}).catch(function(t){(t.response.status=401)&&(e.alertConnexion=!0)})}}},h={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"fill-height":"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md5:"",lg5:"",xl5:""}},[n("v-alert",{attrs:{color:"error",icon:"warning",value:"true",dismissible:""},model:{value:e.alertConnexion,callback:function(t){e.alertConnexion=t},expression:"alertConnexion"}},[e._v("\n              Erreur lors de la connexion\n            ")]),e._v(" "),n("h1",[e._v("Connexion")]),e._v(" "),n("form",{on:{submit:function(t){t.preventDefault(),e.signin()},keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.signin()}}},[n("v-text-field",{attrs:{type:"text",placeholder:"Login",required:""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),e._v(" "),n("v-text-field",{attrs:{type:"password",placeholder:"Password",required:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),e._v(" "),n("v-btn",{attrs:{type:"submit"}},[e._v("Se connecter")])],1)],1),e._v(" "),n("signup")],1)],1)},staticRenderFns:[]};var g=n("VU/8")(p,h,!1,function(e){n("Upj3")},"data-v-f25303b8",null).exports,x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)},staticRenderFns:[]};var _=n("VU/8")({},x,!1,function(e){n("jMck")},"data-v-24007ea0",null).exports,b={data:function(){return{label:"Une Image",serie:{distance:null,name:"",city:{id:null},image:""},imageLoaded:!1,prevImageBool:!1,prevImage:"",imageVide:!0}},created:function(){this.$store.dispatch("series/getCities").then(function(e){}).catch(function(e){console.log(e)})},methods:{pickFile:function(){this.$refs.image.click()},deleteSerie:function(e){},fileChange:function(e){var t=e.target.files||e.dataTransfer.files;if(this.imageVide=!1,t.length){new Image;this.label=t[0].name;var n=new FileReader,r=this;n.onload=function(e){r.prevImage=e.target.result,r.serie.image=e.target.result,r.serie.image=r.serie.image.split(",")[1],r.prevImageBool=!0},n.readAsDataURL(t[0])}},saveSerie:function(){var e=this;this.$store.dispatch("series/saveSerie",this.serie).then(function(t){e.$router.push({name:"series_list"})}).catch(function(e){})}},computed:s()({},Object(a.b)({cities:"series/getCities"}))},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Ajouter une série")]),e._v(" "),n("v-layout",[n("v-flex",{attrs:{xs12:"",sm4:"","offset-sm1":""}},[n("v-card",[this.imageVide?n("v-card-media",{staticClass:"imageDefault",attrs:{src:"https://www.museumconnections.com/wp-content/uploads/2017/03/picto-carte.png",height:"400px"}}):n("v-card-media",{attrs:{src:e.prevImage,height:"400px"}}),e._v(" "),n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h3",{staticClass:"headline mb-0"},[0!==e.serie.name.length?n("span",[e._v(e._s(e.serie.name))]):n("span",{staticClass:"villeCurrent"},[e._v("Places, parcs ...")])]),e._v(" "),n("div",[null!==e.serie.distance?n("span",[e._v(e._s(e.serie.distance))]):n("span",{staticClass:"villeCurrent"},[e._v("Distance")]),e._v(" "),n("span",{staticClass:"unite"},[e._v("(metres)")])])])])],1)],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm5:"","offset-sm1":""}},[n("form",{on:{submit:function(e){e.preventDefault()}}},[n("v-flex",{staticClass:"text-xs-center"},[n("v-text-field",{attrs:{color:"green",label:this.label,"prepend-icon":"attach_file"},on:{click:e.pickFile}}),e._v(" "),n("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/x-png,image/gif,image/jpeg"},on:{change:e.fileChange}}),e._v(" "),n("v-text-field",{attrs:{color:"green",label:"Nom de la Partie"},model:{value:e.serie.name,callback:function(t){e.$set(e.serie,"name",t)},expression:"serie.name"}}),e._v(" "),n("v-select",{attrs:{color:"green",items:e.cities,label:"La ville","item-text":"name","item-value":"id"},model:{value:e.serie.city.id,callback:function(t){e.$set(e.serie.city,"id",t)},expression:"serie.city.id"}}),e._v(" "),n("v-text-field",{attrs:{color:"green",label:"Distance"},model:{value:e.serie.distance,callback:function(t){e.$set(e.serie,"distance",t)},expression:"serie.distance"}}),e._v(" "),n("v-btn",{on:{click:e.saveSerie}},[e._v("submit")]),e._v(" "),n("router-link",{attrs:{to:"/series/all"}},[n("v-btn",{attrs:{color:"red"}},[e._v("Cancel")])],1)],1)],1)])],1)],1)},staticRenderFns:[]};var w=n("VU/8")(b,k,!1,function(e){n("95Du")},"data-v-b09c0a58",null).exports,A={data:function(){return{dialog:!1}},created:function(){this.$store.dispatch("series/getSeries").then(function(e){}).catch(function(e){console.log("Err"),console.log(e)})},methods:{deleteSerie:function(e){var t=this;this.$store.dispatch("series/deleteSerie",e).then(function(e){t.dialog=!0}).catch(function(e){console.log(e)})},modify:function(){this.$router.push({name:"serie"})}},computed:s()({},Object(a.b)({series:"series/getSeries"}))},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"text-xs-center"},[e._v("Liste des séries "),n("router-link",{staticClass:"lien",attrs:{to:"/series/add"}},[n("v-icon",{attrs:{"x-large":"",color:"light-green darken-1"}},[e._v("add_circle")])],1)],1),e._v(" "),n("br"),e._v(" "),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",xl6:"","offset-xl3":""}},[n("table",{staticClass:"table is-striped"},[n("thead",[n("tr",[n("th",[e._v("Nom")]),e._v(" "),n("th",[e._v("Distance (m)")]),e._v(" "),n("th",[e._v("Nom de la ville")]),e._v(" "),n("th",[e._v("Modifications")])])]),e._v(" "),e._l(e.series,function(t){return n("tbody",[n("tr",[n("td",{staticClass:"text-xs-center"},[n("b",[n("router-link",{staticClass:"lien",attrs:{to:{name:"edit_serie",params:{id:t.id}}}},[e._v(e._s(t.name))])],1)]),e._v(" "),n("td",{staticClass:"text-xs-center"},[e._v(e._s(t.distance))]),e._v(" "),n("td",{staticClass:"text-xs-center"},[e._v(e._s(t.city.name))]),e._v(" "),n("td",{staticClass:"text-xs-center"},[n("button",{on:{click:function(n){e.deleteSerie(t.id)}}},[n("v-icon",{attrs:{color:"red darken-1"}},[e._v("delete_forever")])],1),e._v(" "),n("router-link",{attrs:{to:{name:"serie_photos",params:{id:t.id}}}},[n("button",[n("v-icon",{attrs:{color:"light-green darken-1"}},[e._v("add_a_photo")])],1)]),e._v(" "),n("router-link",{attrs:{to:{name:"edit_serie",params:{id:t.id}}}},[n("button",[n("v-icon",{attrs:{color:"orange lighten-3"}},[e._v("mode_edit")])],1)]),e._v(" "),n("router-link",{attrs:{to:{name:"serie_rules",params:{id:t.id}}}},[n("button",[n("v-icon",{attrs:{color:"cyan lighten-1"}},[e._v("playlist_add")])],1)])],1)])])})],2)])],1),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-text",[e._v("La série à été suprimée")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Ok")])],1)],1)],1)],1)},staticRenderFns:[]};var y=n("VU/8")(A,C,!1,function(e){n("mIdU")},"data-v-660320e5",null).exports,S=n("424j"),z=n("//Fk"),U=n.n(z),E=n("woOf"),M=n.n(E),N="http://api.geoquizz.local:10080/admin",R=n("mtWM"),j=n.n(R),O=j.a.create({baseURL:N}),B=n("+Y1O"),F=n.n(B),P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return F()(e)||t},V=function(e,t){return F()(e,t)},I=function(e){return F.a.remove(e)},J={connected:!1,user:{}},D={namespaced:!0,state:{connected:!1,user:{}},getters:{isConnected:function(e){return e.connected},getConnectedUser:function(e){return e.user}},mutations:{setConnectedUser:function(e,t){e.user=t,e.connected=!0},initState:function(e){M()(e,J)}},actions:{login:function(e,t){var n=e.commit;return O.post("/signin",[],{headers:{Authorization:"Basic "+window.btoa(t.username+":"+t.password)}}).then(function(e){console.log("Hello"),V("token",e.data.token),n("setConnectedUser",{usename:t.username,token:e.data.token})}).catch(function(e){return U.a.reject(e)})},signup:function(e,t){e.commit;return O.post("/signup",t).then(function(e){}).catch(function(e){return U.a.reject(e)})},logout:function(e){(0,e.commit)("initState"),I("token")}}},H=j.a.create({baseURL:N}),T={namespaced:!0,state:{series:[],current_serie:null,cities:[]},getters:{getSeries:function(e){return e.series},getCurrentSerie:function(e){return e.current_serie},getCities:function(e){return e.cities}},mutations:{setSeries:function(e,t){e.series=t},setSerie:function(e,t){for(var n in e.series)if(e.series[n].id==t.id){e.series[n]=t,e.series=e.series.splice();break}},removeSerie:function(e,t){e.series=e.series.filter(function(e){return e.id!=t})},setCities:function(e,t){e.cities=t},addSerie:function(e,t){e.series.push(t)},setCurrentSerie:function(e,t){e.current_serie=t},addNewPhoto:function(e,t){e.current_serie.photos.push(t)},patchSerie:function(e,t){}},actions:{getSeries:function(e){var t=e.commit;return H.get("/series/").then(function(e){return t("setSeries",e.data),U.a.resolve(e)}).catch(function(e){return U.a.reject(e)})},deleteSerie:function(e,t){var n=e.commit;e.state;return H.delete("/series/"+t).then(function(e){n("removeSerie",t)}).catch(function(e){return U.a.reject(e)})},getCities:function(e){var t=e.commit;return H.get("/cities").then(function(e){t("setCities",e.data)}).catch(function(e){return U.a.reject(e)})},saveSerie:function(e,t){var n=e.commit;return H.post("/series",t).then(function(e){n("addSerie",e.data)}).catch(function(e){return U.a.reject(e)})},getSerie:function(e,t){var n=e.commit;return H.get("/series/"+t).then(function(e){return n("setCurrentSerie",e.data),U.a.resolve(e)}).catch(function(e){return U.a.reject(e)})},saveRules:function(e,t){var n=e.commit,r=e.state;return H.put("/series/"+r.current_serie.id+"/rules",t).then(function(e){return n("setCurrentSerie",e.data),U.a.resolve(e)}).catch(function(e){return U.a.reject(e)})},patchSerie:function(e,t){var n=e.commit,r=e.state;return H.patch("series/"+r.current_serie.id+"/edit",t).then(function(e){return n("patchSerie",e.data),U.a.resolve(e)}).catch(function(e){return U.a.reject(e)})},addPhoto:function(e,t){var n=e.commit,r=e.state;return H.post("/series/"+r.current_serie.id+"/photos",t).then(function(e){return console.log(r.current_serie.id),n("addNewPhoto",e.data),U.a.resolve(e)}).catch(function(e){return U.a.reject(e)})}}};r.a.use(a.a);var q=new a.a.Store({plugins:[Object(S.a)()],modules:{auth:D,series:T},state:{},getters:{},mutations:{},actions:{}}),K={beforeRouteEnter:function(e,t,n){"id"in e.params&&q.dispatch("series/getSerie",e.params.id).then(function(e){console.log("Success"),n()}).catch(function(e){console.log("Failure"),n({name:"series_list"})})}},X={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)},staticRenderFns:[]};var Y=n("VU/8")(K,X,!1,function(e){n("dzRz")},"data-v-25f4def0",null).exports,Q={data:function(){return{serie:{distance:null,city_id:null,image:"",name:""},label:"photo",prevImage:"",imageVide:!0}},created:function(){this.serie.name=this.current_serie.name,this.serie.distance=this.current_serie.distance,this.serie.city_id=this.current_serie.city.id,this.$store.dispatch("series/getCities").then(function(e){}).catch(function(e){console.log(e)})},methods:{pickFile:function(){this.$refs.image.click()},fileChange:function(e){this.imageVide=!1;var t=e.target.files||e.dataTransfer.files;if(t.length){new Image;this.label=t[0].name;var n=new FileReader,r=this;n.onload=function(e){r.prevImage=e.target.result,r.serie.image=e.target.result,r.serie.image=r.serie.image.split(",")[1],r.prevImageBool=!0},n.readAsDataURL(t[0])}},saveSerie:function(){var e=this;this.$store.dispatch("series/patchSerie",this.serie).then(function(t){e.$router.push({name:"series_list"})}).catch(function(e){})}},computed:s()({},Object(a.b)({cities:"series/getCities"}),Object(a.b)({current_serie:"series/getCurrentSerie"}))},W={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-flex",{attrs:{xs12:"",sm5:"","offset-sm1":""}},[n("h1",[e._v("Modifier la serie "),n("span",{staticClass:"current_serie"},[e._v(e._s(e.current_serie.name)+" - "+e._s(e.current_serie.city.name))])])]),e._v(" "),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm4:"","offset-sm1":""}},[n("v-card",[this.imageVide?n("v-card-media",{attrs:{src:"http://web.geoquizz.local:10085/uploads/"+e.current_serie.image,height:"400px"}}):n("v-card-media",{attrs:{src:e.prevImage,height:"400px"}}),e._v(" "),n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h3",{staticClass:"headline mb-0"},[0!==e.serie.name.length?n("span",[e._v(e._s(e.serie.name))]):n("span",{staticClass:"current_serie"})]),e._v(" "),n("div",[null!==e.serie.distance?n("span",[e._v(e._s(e.serie.distance))]):n("span",{staticClass:"current_serie"}),e._v(" "),n("span",{staticClass:"unite"},[e._v("(metres)")])])])])],1)],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm5:"","offset-sm1":""}},[n("form",{on:{submit:function(t){t.preventDefault(),e.saveSerie()}}},[n("v-text-field",{attrs:{color:"green",label:this.label,"prepend-icon":"attach_file"},on:{click:e.pickFile}}),e._v(" "),n("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",color:"green",accept:"image/x-png,image/gif,image/jpeg"},on:{change:e.fileChange}}),e._v(" "),n("v-text-field",{attrs:{color:"green",type:"text",label:e.current_serie.name},model:{value:e.serie.name,callback:function(t){e.$set(e.serie,"name",t)},expression:"serie.name"}}),e._v(" "),n("v-select",{attrs:{color:"green",label:e.current_serie.city.name,"item-value":"id","item-text":"name",items:e.cities},model:{value:e.serie.city_id,callback:function(t){e.$set(e.serie,"city_id",t)},expression:"serie.city_id"}}),e._v(" "),n("v-text-field",{attrs:{color:"green",type:"text",label:e.current_serie.distance},model:{value:e.serie.distance,callback:function(t){e.$set(e.serie,"distance",t)},expression:"serie.distance"}}),e._v(" "),n("v-btn",{on:{click:e.saveSerie}},[e._v("submit")]),e._v(" "),n("router-link",{attrs:{to:"/series/all"}},[n("v-btn",{attrs:{color:"red"}},[e._v("Cancel")])],1)],1)])],1)],1)},staticRenderFns:[]};var Z=n("VU/8")(Q,W,!1,function(e){n("OxFI")},"data-v-1d29b4d9",null).exports,G={data:function(){return{}},methods:{saveRules:function(){var e=this;this.current_serie.paliers.length>=1&&this.current_serie.times.length>=1?this.$store.dispatch("series/saveRules",this.current_serie).then(function(t){e.$router.push({name:"series_list"})}).catch(function(e){console.log(e)}):alert("Au moins une règle par type")},addPalier:function(){this.current_serie.paliers.push({coef:"",points:""})},addTime:function(){this.current_serie.times.push({nb_seconds:"",coef:""})},removePalier:function(e){this.current_serie.paliers.splice(e,1)},removeTime:function(e){this.current_serie.times.splice(e,1)}},computed:s()({},Object(a.b)({current_serie:"series/getCurrentSerie"}))},$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"grid-list-md":"","text-xs-center":"",fluid:""}},[n("router-link",{attrs:{to:"/series/all"}},[n("v-btn",{attrs:{color:"primary"}},[e._v("Retour")])],1),e._v(" "),n("h1",{staticClass:"text-xs-center"},[e._v("Serie rules")]),e._v(" "),n("form",{on:{submit:function(t){t.preventDefault(),e.saveRules()}}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[n("v-card",{attrs:{color:"grey lighten-4",flat:""}},[n("h2",[e._v("Paramétrage des distances (distance de calcul: 100m)")]),e._v(" "),n("v-card-text",[n("v-container",{attrs:{fluid:""}},[e._l(e.current_serie.paliers,function(t,r){return n("v-layout",{key:t.id,attrs:{row:""}},[n("v-flex",{attrs:{xs4:"","offset-xs1":""}},[e._v("\n\t\t\t\t\t\t\t\t\tCoef: "),n("v-text-field",{attrs:{type:"number"},model:{value:e.current_serie.paliers[r].coef,callback:function(t){e.$set(e.current_serie.paliers[r],"coef",t)},expression:"current_serie.paliers[index].coef"}})],1),e._v(" "),n("v-flex",{attrs:{xs4:"","offset-xs1":""}},[e._v("\n\t\t\t\t\t\t\t\t\tPoints: "),n("v-text-field",{attrs:{type:"number"},model:{value:e.current_serie.paliers[r].points,callback:function(t){e.$set(e.current_serie.paliers[r],"points",t)},expression:"current_serie.paliers[index].points"}})],1),e._v(" "),n("v-flex",{attrs:{xs1:"","offset-xs1":""}},[e.current_serie.paliers.length>1?n("v-icon",{attrs:{color:"error","fill-height":""},on:{click:function(t){e.removePalier(r)}}},[e._v("delete_forever")]):e._e()],1)],1)}),e._v(" "),n("v-btn",{attrs:{color:"primary",type:"button"},on:{click:function(t){e.addPalier()}}},[e._v("Add")])],2)],1)],1)],1),e._v(" "),n("v-flex",{attrs:{xs12:"",sm12:"",md6:""}},[n("v-card",{attrs:{xs5:"","offset-xs2":"",color:"grey lighten-4",flat:""}},[n("h2",[e._v("Paramétrage du temps (unité: seconde)")]),e._v(" "),n("v-card-text",[n("v-container",{attrs:{fluid:""}},[e._l(e.current_serie.times,function(t,r){return n("v-layout",{key:t.id,attrs:{row:""}},[n("v-flex",{attrs:{xs4:"","offset-xs1":""}},[e._v("\n\t\t\t\t\t\t\t\t\tNombre de secondes: "),n("v-text-field",{attrs:{type:"number"},model:{value:e.current_serie.times[r].nb_seconds,callback:function(t){e.$set(e.current_serie.times[r],"nb_seconds",t)},expression:"current_serie.times[index].nb_seconds"}})],1),e._v(" "),n("v-flex",{attrs:{xs4:"","offset-xs1":""}},[e._v("\n\t\t\t\t\t\t\t\t\tMultiplicateur: "),n("v-text-field",{attrs:{type:"number"},model:{value:e.current_serie.times[r].coef,callback:function(t){e.$set(e.current_serie.times[r],"coef",t)},expression:"current_serie.times[index].coef"}})],1),e._v(" "),n("v-flex",{attrs:{xs4:"","offset-xs1":""}},[e.current_serie.times.length>1?n("v-icon",{attrs:{color:"error",type:"button"},on:{click:function(t){e.removeTime(r)}}},[e._v("delete_forever")]):e._e()],1)],1)}),e._v(" "),n("v-btn",{attrs:{color:"primary",type:"button"},on:{click:function(t){e.addTime()}}},[e._v("Add")])],2)],1)],1)],1),e._v(" "),n("v-btn",{attrs:{color:"primary",type:"submit",value:"save"}},[e._v("Save")])],1)],1)],1)},staticRenderFns:[]};var ee=n("VU/8")(G,$,!1,function(e){n("atrw")},"data-v-f86d8e2c",null).exports,te=n("MdIv"),ne=n.n(te);delete L.Icon.Default.prototype._getIconUrl,L.Icon.Default.mergeOptions({iconRetinaUrl:n("qXhe"),iconUrl:n("TJ5S"),shadowUrl:n("wkq0")}),r.a.component("v-map",ne.a.Map),r.a.component("v-tilelayer",ne.a.TileLayer),r.a.component("v-marker",ne.a.Marker);var re={name:"serie_photo",data:function(){return{dialog:!1,newPhoto:{lat:"",lng:"",description:"",photo:""},selectedPosition:{lat:null,lng:null},marker:null}},created:function(){},mounted:function(){var e=this;this.$refs.map.mapObject.on("click",function(t){null!==e.marker&&e.$refs.map.mapObject.removeLayer(e.marker),e.newPhoto.lat=t.latlng.lat,e.newPhoto.lng=t.latlng.lng,e.marker=L.marker([t.latlng.lat,t.latlng.lng]).addTo(e.$refs.map.mapObject)})},methods:{submit:function(){var e=this;this.$store.dispatch("series/addPhoto",this.newPhoto).then(function(t){e.dialog=!0}).catch(function(e){console.log(e)})},onFileChange:function(e){var t=e.target.files||e.dataTransfer.files;if(t.length){new Image;var n=new FileReader,r=this;n.onload=function(e){r.newPhoto.photo=e.target.result,r.newPhoto.photo=r.newPhoto.photo.split(",")[1]},n.readAsDataURL(t[0])}},newMarker:function(){this.newPhoto.lat="",this.newPhoto.lng="",this.newPhoto.description="",this.newPhoto.photo="",this.selectedPosition.lat=null,this.selectedPosition.lng=null,this.marker.remove(),this.marker=null,this.dialog=!1},redirect:function(){this.$router.push({name:"series_list"})}},computed:s()({},Object(a.b)({current_serie:"series/getCurrentSerie"}))},ie={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{attrs:{"grid-list-md":"","text-xs-center":""}},[n("form",[n("input",{attrs:{type:"file",name:"image",accept:"image/x-png,image/gif,image/jpeg"},on:{change:e.onFileChange}}),e._v(" "),n("v-text-field",{attrs:{label:"Description"},model:{value:e.newPhoto.description,callback:function(t){e.$set(e.newPhoto,"description",t)},expression:"newPhoto.description"}}),e._v(" "),n("div",{staticClass:"column container",attrs:{id:"carte"}},[n("div",{staticClass:"carte"},[n("v-map",{ref:"map",attrs:{zoom:e.current_serie.city.zoom_level,center:[e.current_serie.city.lat,e.current_serie.city.lng]}},[n("v-tilelayer",{attrs:{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}})],1)],1)]),e._v(" "),n("v-dialog",{attrs:{id:"dialog",persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("h2",[e._v("La photo a bien était rajoutée")])]),e._v(" "),n("v-card-text",[n("v-btn",{on:{click:function(t){e.newMarker()}}},[n("v-icon",[e._v("add_a_photo")]),e._v(" autre photo")],1),e._v(" "),n("v-btn",{on:{click:function(t){e.redirect()}}},[e._v("Fin")])],1)],1)],1),e._v(" "),n("v-btn",{on:{click:e.submit}},[e._v("submit")]),e._v(" "),n("router-link",{attrs:{to:"/series/all"}},[n("v-btn",{attrs:{color:"red"}},[e._v("Cancel")])],1)],1)])],1)},staticRenderFns:[]};var se=n("VU/8")(re,ie,!1,function(e){n("25Wg")},"data-v-4095ac82",null).exports;r.a.use(f.a);var ae=new f.a({routes:[{path:"/",name:"signin",component:g},{path:"/signup",name:"signup",component:m},{path:"/series",component:_,children:[{path:"add",component:w,name:"add_serie"},{path:"all",component:y,name:"series_list"},{path:":id",component:Y,children:[{path:"edit",component:Z,name:"edit_serie"},{path:"rules",component:ee,name:"serie_rules"},{path:"photos",component:se,name:"serie_photos"}]},{path:"/",component:y}]}]}),oe=ae;ae.beforeEach(function(e,t,n){"signin"==e.name||"signup"==e.name||q.getters["auth/isConnected"]?"signin"!=e.name&&"signup"!=e.name||!q.getters["auth/isConnected"]?n():n({name:"series_list"}):n({name:"signin",query:{redirect:e.fullPath}})});var ce={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};H.interceptors.request.use(function(e){return P("token")&&(e.params||(e.params={}),e.headers.Authorization="Bearer "+P("token")),e},function(e){return U.a.reject(e)}),H.interceptors.response.use(function(e){return e},function(e){return e.response&&401==e.response.status&&(q.dispatch("auth/logout",!e.response.data.error.indexOf("wrong token")),t.router.push({name:"signin"})),U.a.reject(e)})}},le=n("3EgV"),ue=n.n(le);n("IHMs");n.e(0).then(n.bind(null,"7zck")),r.a.use(ue.a),r.a.config.productionTip=!1,r.a.use(ce,{router:oe}),new r.a({el:"#app",router:oe,store:q,components:{App:d},template:"<App/>"})},OxFI:function(e,t){},TJ5S:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},Upj3:function(e,t){},YP8P:function(e,t){},atrw:function(e,t){},dzRz:function(e,t){},ePtn:function(e,t){},jMck:function(e,t){},mIdU:function(e,t){},qXhe:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcY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"},wkq0:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"}},["NHnr"]);
//# sourceMappingURL=app.24eda121df9a0b064767.js.map